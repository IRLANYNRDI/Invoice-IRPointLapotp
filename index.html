<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Invoice App</title>
  <link rel="stylesheet" href="style.css" />

  <!-- PDF generator -->
  <script defer src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
  <script defer src="app.js"></script>
</head>

<body>
  <div class="container">

    <!-- UI header (tidak ikut print) -->
    <header class="topbar no-print">
      <div class="brand">
        <img id="companyLogo" class="logo" src="logo.png" alt="Logo" />
        <div class="brandText">
          <h1 id="companyName">IRPointLaptop</h1>
          <p id="companyTagline">Suralaga / 08190711124 / irlanyuni@gmail.com</p>
        </div>
      </div>

      <div class="actions">
        <button class="btn" id="btnSettings">Ubah Logo & Nama</button>
        <button class="btn" id="btnSave">Simpan</button>
        <button class="btn" id="btnReset">Reset</button>
        <button class="btn" id="btnPrint">Print</button>
        <button class="btn primary" id="btnPDF">Download PDF</button>
      </div>
    </header>

    <!-- Form input (tidak ikut print) -->
    <section class="panel no-print">
      <div class="grid2">
        <div>
          <label>Jenis Invoice</label>
          <select id="invoiceType">
            <option value="penjualan">Penjualan</option>
            <option value="service">Service</option>
            <option value="gabungan">Gabungan</option>
          </select>
        </div>

        <div>
          <label>Tanggal</label>
          <input id="invoiceDate" type="date" />
        </div>

        <div>
          <label>No. Invoice</label>
          <input id="invoiceNo" type="text" placeholder="Auto / isi manual" />
        </div>

        <div>
          <label>Nama Customer</label>
          <input id="customerName" type="text" placeholder="Nama customer" />
        </div>

        <div>
          <label>No. HP</label>
          <input id="customerPhone" type="text" placeholder="08xxxxxxxxxx" />
        </div>

        <div>
          <label>Alamat</label>
          <input id="customerAddress" type="text" placeholder="Alamat customer (opsional)" />
        </div>
      </div>
    </section>

    <!-- INVOICE PAPER (yang dicetak & dipdf) -->
    <main id="invoicePaper" class="paper">

      <!-- Brand untuk print/PDF (logo pasti ikut) -->
      <div class="paperBrand">
        <img id="paperLogo" src="logo.png" alt="Logo" />
        <div class="paperBrandText">
          <div id="paperName">IRPointLaptop</div>
          <div id="paperTagline">Suralaga / 08190711124 / irlanyuni@gmail.com</div>
        </div>
      </div>

      <div class="invoiceHeader">
        <div>
          <h2>INVOICE</h2>
          <div class="meta">
            <div><span>Jenis</span><b id="pType">Penjualan</b></div>
            <div><span>Tanggal</span><b id="pDate">-</b></div>
            <div><span>No</span><b id="pNo">-</b></div>
          </div>
        </div>

        <div class="toBox">
          <h3>Kepada:</h3>
          <p><b id="pCustName">-</b></p>
          <p id="pCustPhone">-</p>
          <p id="pCustAddress">-</p>
        </div>
      </div>

      <!-- Items -->
      <section class="section">
        <div class="sectionTitle">
          <h3>Daftar Item</h3>
          <button class="btn small no-print" id="btnAddRow">Tambah Item</button>
        </div>

        <div class="tableWrap">
          <table class="tbl">
            <thead>
              <tr>
                <th style="width:70px">Qty</th>
                <th>Nama Barang / Jasa</th>
                <th style="width:160px">Harga (Rp)</th>
                <th style="width:170px">Sub Total (Rp)</th>
                <th class="no-print" style="width:90px">Aksi</th>
              </tr>
            </thead>
            <tbody id="itemsBody"></tbody>
          </table>
        </div>
      </section>

      <!-- Service Notes -->
      <section class="section" id="serviceSection">
        <h3>Catatan Service</h3>
        <div class="serviceGrid">
          <div>
            <label>Device / Unit</label>
            <input id="svcDevice" type="text" placeholder="Contoh: Laptop ASUS X441" />
          </div>
          <div>
            <label>SN / IMEI (opsional)</label>
            <input id="svcSN" type="text" placeholder="Serial Number" />
          </div>
          <div class="full">
            <label>Keluhan / Pekerjaan</label>
            <textarea id="svcWork" rows="3" placeholder="Contoh: ganti keyboard, install ulang, dll"></textarea>
          </div>
          <div class="full">
            <label>Catatan Tambahan</label>
            <textarea id="svcNote" rows="2" placeholder="Contoh: Garansi 7 hari, dsb"></textarea>
          </div>
        </div>
      </section>

      <!-- Summary -->
      <section class="summary">
        <div class="summaryLeft">
          <label>Catatan / Terms</label>
          <textarea id="terms" rows="4" placeholder="Contoh: Barang yang sudah dibeli tidak dapat dikembalikan. Garansi service 7 hari."></textarea>

          <!-- Hormat saya (sejajar kiri dengan Terms) -->
          <div class="sign">
            <p>Hormat saya,</p>
            <img id="signLogo" class="signLogo" src="logo.png" alt="Stamp/Logo" />
            <p id="pSignName"></p> <!-- disembunyikan via CSS -->
          </div>
        </div>

        <div class="summaryRight">
          <div class="row">
            <span>Subtotal</span>
            <b id="sumSubtotal">Rp 0</b>
          </div>

          <div class="row">
            <span>Diskon</span>
            <div class="inline">
              <input id="discount" type="number" min="0" value="0" />
              <small>Rp</small>
            </div>
          </div>

          <div class="row">
            <span>Pajak</span>
            <div class="inline">
              <input id="tax" type="number" min="0" value="0" />
              <small>Rp</small>
            </div>
          </div>

          <div class="row total">
            <span>Total</span>
            <b id="sumTotal">Rp 0</b>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Settings Modal -->
  <div id="modal" class="modal hidden">
    <div class="modalCard">
      <div class="modalHead">
        <h3>Ubah Identitas Toko</h3>
        <button class="btn" id="btnCloseModal">Tutup</button>
      </div>

      <div class="modalBody">
        <label>Nama Toko</label>
        <input id="setName" type="text" placeholder="Contoh: IRPointLaptop" />

        <label>Tagline / Kontak</label>
        <input id="setTagline" type="text" placeholder="Alamat / No HP / Email" />

        <label>Logo (upload)</label>
        <input id="setLogo" type="file" accept="image/*" />

        <label>Logo Stamp / Tanda Tangan (opsional)</label>
        <input id="setStamp" type="file" accept="image/*" />
        <p class="hint">Jika kosong, stamp akan pakai logo utama.</p>

        <button class="btn primary" id="btnApplySettings">Simpan Perubahan</button>
        <p class="hint">Tersimpan di browser (localStorage). Kalau pindah device, set ulang.</p>
      </div>
    </div>
  </div>
</body>
</html>
